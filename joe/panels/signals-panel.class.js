/* Copyright (c) 2022 Read Write Tools. Legal use subject to the Thematic Earth Software License Agreement. */
import BasePanel from'../panels/base-panel.class.js';import Signal from'../events/signal.class.js';export default class SignalsPanel extends BasePanel{constructor(t){super(t),Object.seal(this)}registerBroadcasters(){var t=this.getElementById('signals-wants-menu');t.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsMenu',t.checked)}));var e=this.getElementById('signals-wants-user');e.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsUser',e.checked)}));var s=this.getElementById('signals-wants-keyboard');s.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsKeyboard',s.checked)}));var a=this.getElementById('signals-wants-mouse');a.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsMouse',a.checked)}));var i=this.getElementById('signals-wants-gesture');i.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsGesture',i.checked)}));var l=this.getElementById('signals-wants-projection');l.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsProjection',l.checked)}));var n=this.getElementById('signals-wants-earth-position');n.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsEarthPosition',n.checked)}));var r=this.getElementById('signals-wants-layers');r.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsLayers',r.checked)}));var o=this.getElementById('signals-wants-others');o.addEventListener('click',(()=>{this.signal.broadcast('signal/wantsOthers',o.checked)}))}registerReceivers(){this.signal.listen('signal/broadcast',(t=>{var e=t.origin,s=t.request,a=t.sti,i=t.signalCounter,l=t.data,n=this.querySelector('#signals-table tbody'),r=document.createElement('tr');r.setAttribute('origin',e),r.innerHTML=`\n\t\t\t\t<td class='chef-left'><pre>${i} Broadcast</pre></td>\t\t\t\t\t\n\t\t\t\t<td class='chef-left'><pre>${e}</pre></td>\t\t\t\t\t\n\t\t\t\t<td class='chef-left'><pre>${s}</pre></td>\t\t\t\t\t\n\t\t\t\t<td class='column4'><pre>${a.classname}:${a.member} [${a.line}:${a.column}]<br>${Signal.formatSignalsData(l)}</pre></td>\n\t\t\t\t`,n.prepend(r)})),this.signal.listen('signal/receive',(t=>{var e=t.origin,s=(t.request,t.sti),a=t.signalCounter,i=this.querySelector('#signals-table tbody'),l=document.createElement('tr');for(l.setAttribute('origin',e),l.innerHTML=`\n\t\t\t\t<td class='chef-left'>${a} Receive</td>\t\t\t\t\t\n\t\t\t\t<td class='chef-left'></td>\t\t\t\t\t\n\t\t\t\t<td class='chef-left'></td>\t\t\t\t\t\n\t\t\t\t<td class='column4'><pre>${s.classname}:${s.member} [${s.line}:${s.column}]</pre></td>\n\t\t\t\t`,i.prepend(l);i.children.length>250;)i.removeChild(i.children[250])})),this.signal.listen('signal/wantsMenu',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsMenu=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=menu]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsUser',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsUser=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=user]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsKeyboard',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsKeyboard=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=keyboard]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsMouse',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsMouse=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=mouse]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsGesture',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsGesture=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=gesture]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsProjection',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsProjection=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=carte]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=ortho]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=viewport]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsEarthPosition',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsEarthPosition=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=earthPosition]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsLayers',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsLayers=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=catalog]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=legend]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=greatCircles]');for(let t=0;t<s.length;t++)s[t].remove()}})),this.signal.listen('signal/wantsOthers',(t=>{var e=t;if(this.thematicEarthElement.signal.wantsOthers=e,0==e){var s=this.querySelectorAll('#signals-table tr[origin=animation]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=visualization]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=canvas]');for(let t=0;t<s.length;t++)s[t].remove();s=this.querySelectorAll('#signals-table tr[origin=api]');for(let t=0;t<s.length;t++)s[t].remove()}}))}}